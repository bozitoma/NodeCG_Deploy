import{d as R,e as T,u as M,r as B,f as d,j as e,g as ee,h as Q,i as j,F as A,k as te,R as ne,c as re,a as se}from"./useRepList-2da67c25.js";import{c as q,b as _,a as w}from"./bracketResultDefaultValue-a92f6294.js";import{d as ae,B as I,a as z,b as oe,M as N,D as ce,S as o,T as E,r as ie,i as le,I as U,c as de}from"./DialogAlert-4efff679.js";import{u as ue,U as pe,T as me,D as Fe}from"./TitleDivider-df1d71f1.js";const V=R({key:"bracketAtom",default:{WQF:"Winners Quarter",WSF:"Winners Semi",WF:"Winners Final",LTOP16:"Losers Top16",LTOP8:"Losers Top8",LQF:"Losers Quarter",LSF:"Losers Semi",LF:"Losers Final",GF:"Grand Final",GF2:"Grand Final set2"}});R({key:"bracketSetsAtom",default:[]});const i=q,y=R({key:"bracketResultAtom",default:{WQFa:i,WQFb:i,WQFc:i,WQFd:i,WSFa:i,WSFb:i,WF:i,LTOP16a:i,LTOP16b:i,LTOP16c:i,LTOP16d:i,LTOP8a:i,LTOP8b:i,LQFa:i,LQFb:i,LSF:i,LF:i,GF:i,GF2:i}}),H=R({key:"bracketStartggUrlAtom",default:""}),J=R({key:"bracketLoadingAtom",default:!1}),K=R({key:"bracketCompletedAlertAtom",default:!1}),X=R({key:"bracketErrorAlertAtom",default:!1});function Le(){const[t,r]=T(y),[s,n]=T(V),{repBracket:a,setRepBracket:F}=M(),[h,L]=B.useState(!1),[O,u]=B.useState(!1),P=()=>{u(!0)},[m,b]=B.useState(!1);return d(o,{direction:"row",spacing:1.5,children:[e(I,{variant:"contained",color:"primary",startIcon:e(ae,{}),sx:{width:250},onClick:()=>{F({WQFa:t.WQFa,WQFb:t.WQFb,WQFc:t.WQFc,WQFd:t.WQFd,WSFa:t.WSFa,WSFb:t.WSFb,WF:t.WF,LTOP16a:t.LTOP16a,LTOP16b:t.LTOP16b,LTOP16c:t.LTOP16c,LTOP16d:t.LTOP16d,LTOP8a:t.LTOP8a,LTOP8b:t.LTOP8b,LQFa:t.LQFa,LQFb:t.LQFb,LSF:t.LSF,LF:t.LF,GF:t.GF,GF2:t.GF2,BracketRound:s}),console.log(a==null?void 0:a.WQFa),L(!0)},children:"SUBMIT"}),e(I,{variant:"outlined",color:"error",startIcon:e(z,{}),sx:{width:120},onClick:P,children:"RESET"}),e(I,{variant:"outlined",color:"primary",startIcon:e(oe,{}),sx:{width:120},onClick:()=>{a!==void 0&&(_.map(k=>{n(f=>({...f,[k]:a.BracketRound[k]}))}),w.map(k=>{r(f=>({...f,[k]:a[k]}))}))},children:"RESTORE"}),e(N,{state:h,setState:L,text:"Update has been completed brackets!",severity:"success"}),e(N,{state:m,setState:b,text:"Reset has been completed brackets!",severity:"success"}),e(ce,{state:O,setState:u,text:"Do you want to reset the brackets?",reset:()=>{w.map(k=>{r(f=>({...f,[k]:{name1p:"",name2p:"",score1p:-1,score2p:-1}}))}),_.map(k=>{n(f=>({...f,[k]:ee.Bracket.BracketRound[k]}))}),u(!1),b(!0)}})]})}function ke(){const t=Q(y),r=Q(J),s=Q(K),n=Q(X),a=j(H),{requestQuery:F}=ue(),h=`
    query PhaseGroupSets($phaseGroupId: ID!) {
      phaseGroup(id: $phaseGroupId) {
        id
        bracketType
        sets(page: 1, perPage: 19, sortType: NONE)  {
          nodes {
            id
            fullRoundText
            slots {
              standing {
                placement
                stats {
                  score {
                    value
                  }
                }
              }
              entrant {
                name
              }
            }
          }
        }
      }
    }`,L=["GF","GF2"],O=["WF","WSFb","WSFa","WQFd","WQFc","WQFb","WQFa"],u=["LF","LSF","LQFb","LQFa","LTOP8b","LTOP8a","LTOP16d","LTOP16c","LTOP16b","LTOP16a"];return{handleGetSets:async()=>{r(!0);try{const m=await F(a,h),b=m.data.phaseGroup.bracketType,W=m.data.phaseGroup.sets.nodes,S=[],G=[],k=[];W.map(g=>{const c=g.fullRoundText;b==="DOUBLE_ELIMINATION"?c.includes("Grand")?S.push(g):c.includes("Winners")?G.push(g):c.includes("Losers")&&k.push(g):b==="SINGLE_ELIMINATION"&&(c.includes("3rd Place Tiebreak")?S.push(g):c.includes("Final")&&G.push(g))});const f=(g,c)=>{c===S?c.sort((x,p)=>x.id-p.id):c.sort((x,p)=>p.id-x.id),g.map((x,p)=>{c[p]!==void 0&&t(Z=>({...Z,[x]:{name1p:c[p].slots[0].entrant===null?"":c[p].slots[0].entrant.name,name2p:c[p].slots[1].entrant===null?"":c[p].slots[1].entrant.name,score1p:c[p].slots[0].standing===null||c[p].slots[0].standing.stats.score.value===null?0:c[p].slots[0].standing.stats.score.value,score2p:c[p].slots[1].standing===null||c[p].slots[1].standing.stats.score.value===null?0:c[p].slots[1].standing.stats.score.value}}))})};f(L,S),f(O,G),f(u,k),s(!0)}catch(m){console.error("StartGGのAPI取得に失敗しました:",m),n(!0)}r(!1)}}}function he(){const[t,r]=T(H),s=j(J),[n,a]=T(K),[F,h]=T(X),{handleGetSets:L}=ke();return d(A,{children:[e(pe,{id:"Start.GG-Bracket",label:"Start.GG URL",url:t,setUrl:r,onClick:()=>{L()},width:630,isLoading:s}),e(N,{state:n,setState:a,text:"Update has been completed bracket of Start.GG!",severity:"success"}),e(N,{state:F,setState:h,text:"Error!",severity:"error"})]})}function v({id:t,value:r,onChange:s}){return e(A,{children:e(E,{id:t,variant:"standard",sx:{width:244},size:"small",value:r,onChange:s})})}const be=()=>{const[t,r]=T(V);return{bracketRound:t,bracketRoundEdit:n=>{r(a=>({...a,[n.target.id]:n.target.value}))}}};function D({text:t,Round1:r,Round2:s,Round3:n,Round4:a,Round5:F}){const{bracketRound:h,bracketRoundEdit:L}=be();return d(A,{children:[e(me,{text:t}),d(o,{spacing:4,direction:"row",children:[e(v,{id:r,value:h[r],onChange:L}),e(v,{id:s,value:h[s],onChange:L}),e(v,{id:n,value:h[n],onChange:L}),e(v,{id:a,value:h[a],onChange:L}),e(v,{id:F,value:h[F],onChange:L})]})]})}function $({idName:t,valueName:r,onChangeName:s,idScore:n,valueScore:a,onChangeScore:F}){return d(o,{spacing:.5,direction:"row",children:[e(E,{id:t,label:"Player name",variant:"outlined",sx:{width:140},size:"small",value:r,onChange:s}),e(E,{id:n,type:"number",variant:"outlined",sx:{width:60},size:"small",value:a,onChange:F,InputProps:{inputProps:{min:-1,max:3}}})]})}var C={},Se=le;Object.defineProperty(C,"__esModule",{value:!0});var Y=C.default=void 0,fe=Se(ie()),ge=te,Te=(0,fe.default)((0,ge.jsx)("path",{d:"M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"}),"Reply");Y=C.default=Te;function Re({value:t,onChangeName:r,onChangeScore:s,name:n,reset:a,assign:F}){return d(o,{spacing:.5,children:[d(o,{direction:"row",children:[e($,{idName:`${n}-name1p`,valueName:t[n].name1p,onChangeName:r,idScore:`${n}-score1p`,valueScore:t[n].score1p,onChangeScore:s}),e(U,{color:"primary",onClick:F,name:n,children:e(Y,{})})]}),d(o,{direction:"row",children:[e($,{idName:`${n}-name2p`,valueName:t[n].name2p,onChangeName:r,idScore:`${n}-score2p`,valueScore:t[n].score2p,onChangeScore:s}),e(U,{onClick:a,name:n,children:e(z,{})})]})]})}function l({roundName:t}){const[r,s]=T(y),{repInformation:n}=M(),a=q;return e(A,{children:e(Re,{value:r,onChangeName:u=>{const m=u.currentTarget.id.split("-"),b=m[0],W=m[1];s(S=>({...S,[b]:{...S[b],[W]:u.target.value}}))},onChangeScore:u=>{const m=u.currentTarget.id.split("-"),b=m[0],W=m[1];s(S=>({...S,[b]:{...S[b],[W]:Number(u.target.value)}}))},name:t,reset:u=>{const P=u.currentTarget.name;s(m=>({...m,[P]:a}))},assign:()=>{n!==void 0&&s(u=>({...u,[t]:{name1p:n.Player1.name,name2p:n.Player2.name,score1p:n.Player1.score,score2p:n.Player2.score}}))}})})}function Pe(){return e(de,{sx:{width:"100%"},children:d(o,{spacing:2,children:[e(D,{text:"Winners Side",Round1:"WQF",Round2:"WSF",Round3:"WF",Round4:"GF",Round5:"GF2"}),d(o,{spacing:2,direction:"row",children:[d(o,{spacing:2,children:[e(l,{roundName:"WQFa"}),e(l,{roundName:"WQFb"}),e(l,{roundName:"WQFc"}),e(l,{roundName:"WQFd"})]}),d(o,{spacing:14.5,sx:{pt:6},children:[e(l,{roundName:"WSFa"}),e(l,{roundName:"WSFb"})]}),e(o,{sx:{pt:19},children:e(l,{roundName:"WF"})}),e(o,{sx:{pt:19},children:e(l,{roundName:"GF"})}),e(o,{sx:{pt:19},children:e(l,{roundName:"GF2"})})]}),e(D,{text:"Losers Side",Round1:"LTOP16",Round2:"LTOP8",Round3:"LQF",Round4:"LSF",Round5:"LF"}),d(o,{spacing:2,direction:"row",children:[d(o,{spacing:2,children:[e(l,{roundName:"LTOP16a"}),e(l,{roundName:"LTOP16b"}),e(l,{roundName:"LTOP16c"}),e(l,{roundName:"LTOP16d"})]}),d(o,{spacing:14.5,sx:{pt:6},children:[e(l,{roundName:"LTOP8a"}),e(l,{roundName:"LTOP8b"})]}),d(o,{spacing:14.5,sx:{pt:6},children:[e(l,{roundName:"LQFa"}),e(l,{roundName:"LQFb"})]}),e(o,{sx:{pt:19},children:e(l,{roundName:"LSF"})}),e(o,{sx:{pt:19},children:e(l,{roundName:"LF"})})]})]})})}function We(){return e(ne,{children:d(o,{spacing:2,children:[d(o,{spacing:2,direction:"row",children:[e(Le,{}),e(Fe,{orientation:"vertical",flexItem:!0}),e(he,{})]}),e(Pe,{})]})})}re.createRoot(document.getElementById("root")).render(e(se.StrictMode,{children:e(We,{})}));
